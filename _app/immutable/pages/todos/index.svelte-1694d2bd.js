import{N as J,S as de,i as ue,s as ve,e as g,k as T,c as q,a as V,m as M,d as k,b as n,O as ne,g as K,F as v,P as Z,Q as ce,R as pe,T as he,U as fe,V as ae,W as me,t as _e,L as ge,h as qe,X as be,q as ke,r as we,p as ye,o as Ee,Y as xe,n as Ce}from"../../chunks/index-9622eeea.js";import{c as I}from"../../chunks/singletons-d1fb5791.js";I.disable_scroll_handling;I.goto;const Te=I.invalidate;I.prefetch;I.prefetch_routes;I.before_navigate;I.after_navigate;function $(i,{pending:e,error:t,result:o}={}){let c;async function _(h){const l=c={};h.preventDefault();const d=new FormData(i);e&&e({data:d,form:i});try{const p=await fetch(i.action,{method:i.method,headers:{accept:"application/json"},body:d});if(l!==c)return;if(p.ok){o&&o({data:d,form:i,response:p});const s=new URL(i.action);s.search=s.hash="",Te(s.href)}else t?t({data:d,form:i,error:null,response:p}):console.error(await p.text())}catch(p){if(t&&p instanceof Error)t({data:d,form:i,error:p,response:null});else throw p}}return i.addEventListener("submit",_),{destroy(){i.removeEventListener("submit",_)}}}function ie(i){const e=i-1;return e*e*e+1}function se(i,{delay:e=0,duration:t=400,easing:o=ie,start:c=0,opacity:_=0}={}){const h=getComputedStyle(i),l=+h.opacity,d=h.transform==="none"?"":h.transform,p=1-c,s=l*(1-_);return{delay:e,duration:t,easing:o,css:(E,w)=>`
			transform: ${d} scale(${1-p*w});
			opacity: ${l-s*w}
		`}}function Me(i,{from:e,to:t},o={}){const c=getComputedStyle(i),_=c.transform==="none"?"":c.transform,[h,l]=c.transformOrigin.split(" ").map(parseFloat),d=e.left+e.width*h/t.width-(t.left+h),p=e.top+e.height*l/t.height-(t.top+l),{delay:s=0,duration:E=x=>Math.sqrt(x)*120,easing:w=ie}=o;return{delay:s,duration:J(E)?E(Math.sqrt(d*d+p*p)):E,easing:w,css:(x,f)=>{const b=f*d,U=f*p,r=x+f*e.width/t.width,a=x+f*e.height/t.height;return`transform: ${_} translate(${b}px, ${U}px) scale(${r}, ${a});`}}}function le(i,e,t){const o=i.slice();return o[3]=e[t],o[4]=e,o[5]=t,o}function re(i,e){let t,o,c,_,h,l,d,p,s,E,w,x,f,b,U,r,a,u,A,N,P,H,O,R,Q,j,D,S,W,L,X,Y=Ce,C,G,ee;function te(...y){return e[1](e[3],e[4],e[5],...y)}function oe(){return e[2](e[3],e[4],e[5])}return{key:i,first:null,c(){t=g("div"),o=g("form"),c=g("input"),h=T(),l=g("input"),p=T(),s=g("button"),x=T(),f=g("form"),b=g("input"),r=T(),a=g("input"),A=T(),N=g("button"),P=T(),H=g("form"),O=g("input"),Q=T(),j=g("button"),W=T(),this.h()},l(y){t=q(y,"DIV",{class:!0});var m=V(t);o=q(m,"FORM",{action:!0,method:!0});var B=V(o);c=q(B,"INPUT",{type:!0,name:!0,class:!0}),h=M(B),l=q(B,"INPUT",{type:!0,name:!0,class:!0}),p=M(B),s=q(B,"BUTTON",{class:!0,"aria-label":!0}),V(s).forEach(k),B.forEach(k),x=M(m),f=q(m,"FORM",{class:!0,action:!0,method:!0});var F=V(f);b=q(F,"INPUT",{type:!0,name:!0,class:!0}),r=M(F),a=q(F,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),A=M(F),N=q(F,"BUTTON",{class:!0,"aria-label":!0}),V(N).forEach(k),F.forEach(k),P=M(m),H=q(m,"FORM",{action:!0,method:!0});var z=V(H);O=q(z,"INPUT",{type:!0,name:!0,class:!0}),Q=M(z),j=q(z,"BUTTON",{class:!0,"aria-label":!0}),V(j).forEach(k),z.forEach(k),W=M(m),m.forEach(k),this.h()},h(){n(c,"type","hidden"),n(c,"name","uid"),c.value=_=e[3].uid,n(c,"class","svelte-10vqe1e"),n(l,"type","hidden"),n(l,"name","done"),l.value=d=e[3].done?"":"true",n(l,"class","svelte-10vqe1e"),n(s,"class","toggle svelte-10vqe1e"),n(s,"aria-label",E="Mark todo as "+(e[3].done?"not done":"done")),n(o,"action","/todos?_method=PATCH"),n(o,"method","post"),n(b,"type","hidden"),n(b,"name","uid"),b.value=U=e[3].uid,n(b,"class","svelte-10vqe1e"),n(a,"aria-label","Edit todo"),n(a,"type","text"),n(a,"name","text"),a.value=u=e[3].text,n(a,"class","svelte-10vqe1e"),n(N,"class","save svelte-10vqe1e"),n(N,"aria-label","Save todo"),n(f,"class","text svelte-10vqe1e"),n(f,"action","/todos?_method=PATCH"),n(f,"method","post"),n(O,"type","hidden"),n(O,"name","uid"),O.value=R=e[3].uid,n(O,"class","svelte-10vqe1e"),n(j,"class","delete svelte-10vqe1e"),n(j,"aria-label","Delete todo"),j.disabled=D=e[3].pending_delete,n(H,"action","/todos?_method=DELETE"),n(H,"method","post"),n(t,"class","todo svelte-10vqe1e"),ne(t,"done",e[3].done),this.first=t},m(y,m){K(y,t,m),v(t,o),v(o,c),v(o,h),v(o,l),v(o,p),v(o,s),v(t,x),v(t,f),v(f,b),v(f,r),v(f,a),v(f,A),v(f,N),v(t,P),v(t,H),v(H,O),v(H,Q),v(H,j),v(t,W),C=!0,G||(ee=[Z(w=$.call(null,o,{pending:te})),Z($.call(null,f)),Z(S=$.call(null,H,{pending:oe}))],G=!0)},p(y,m){e=y,(!C||m&1&&_!==(_=e[3].uid))&&(c.value=_),(!C||m&1&&d!==(d=e[3].done?"":"true"))&&(l.value=d),(!C||m&1&&E!==(E="Mark todo as "+(e[3].done?"not done":"done")))&&n(s,"aria-label",E),w&&J(w.update)&&m&1&&w.update.call(null,{pending:te}),(!C||m&1&&U!==(U=e[3].uid))&&(b.value=U),(!C||m&1&&u!==(u=e[3].text)&&a.value!==u)&&(a.value=u),(!C||m&1&&R!==(R=e[3].uid))&&(O.value=R),(!C||m&1&&D!==(D=e[3].pending_delete))&&(j.disabled=D),S&&J(S.update)&&m&1&&S.update.call(null,{pending:oe}),m&1&&ne(t,"done",e[3].done)},r(){X=t.getBoundingClientRect()},f(){ce(t),Y(),pe(t,X)},a(){Y(),Y=he(t,X,Me,{duration:200})},i(y){C||(y&&fe(()=>{L||(L=ae(t,se,{start:.7},!0)),L.run(1)}),C=!0)},o(y){y&&(L||(L=ae(t,se,{start:.7},!1)),L.run(0)),C=!1},d(y){y&&k(t),y&&L&&L.end(),G=!1,me(ee)}}}function He(i){let e,t,o,c,_,h,l,d,p,s=[],E=new Map,w,x,f,b=i[0];const U=r=>r[3].uid;for(let r=0;r<b.length;r+=1){let a=le(i,b,r),u=U(a);E.set(u,s[r]=re(u,a))}return{c(){e=g("meta"),t=T(),o=g("div"),c=g("h1"),_=_e("Todos"),h=T(),l=g("form"),d=g("input"),p=T();for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){const a=ge('[data-svelte="svelte-aw2gey"]',document.head);e=q(a,"META",{name:!0,content:!0}),a.forEach(k),t=M(r),o=q(r,"DIV",{class:!0});var u=V(o);c=q(u,"H1",{});var A=V(c);_=qe(A,"Todos"),A.forEach(k),h=M(u),l=q(u,"FORM",{class:!0,action:!0,method:!0});var N=V(l);d=q(N,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),N.forEach(k),p=M(u);for(let P=0;P<s.length;P+=1)s[P].l(u);u.forEach(k),this.h()},h(){document.title="Todos",n(e,"name","description"),n(e,"content","A todo list app"),n(d,"name","text"),n(d,"aria-label","Add todo"),n(d,"placeholder","+ tap to add a todo"),n(d,"class","svelte-10vqe1e"),n(l,"class","new svelte-10vqe1e"),n(l,"action","/todos"),n(l,"method","post"),n(o,"class","todos svelte-10vqe1e")},m(r,a){v(document.head,e),K(r,t,a),K(r,o,a),v(o,c),v(c,_),v(o,h),v(o,l),v(l,d),v(o,p);for(let u=0;u<s.length;u+=1)s[u].m(o,null);w=!0,x||(f=Z($.call(null,l,{result:Ve})),x=!0)},p(r,[a]){if(a&1){b=r[0],Ee();for(let u=0;u<s.length;u+=1)s[u].r();s=be(s,a,U,1,r,b,E,o,xe,re,null,le);for(let u=0;u<s.length;u+=1)s[u].a();ke()}},i(r){if(!w){for(let a=0;a<b.length;a+=1)we(s[a]);w=!0}},o(r){for(let a=0;a<s.length;a+=1)ye(s[a]);w=!1},d(r){k(e),r&&k(t),r&&k(o);for(let a=0;a<s.length;a+=1)s[a].d();x=!1,f()}}}const Ve=async({form:i})=>{i.reset()};function Ue(i,e,t){let{todos:o}=e;const c=(h,l,d,{data:p})=>{t(0,l[d].done=!!p.get("done"),o)},_=(h,l,d)=>t(0,l[d].pending_delete=!0,o);return i.$$set=h=>{"todos"in h&&t(0,o=h.todos)},[o,c,_]}class je extends de{constructor(e){super(),ue(this,e,Ue,He,ve,{todos:0})}}export{je as default};
